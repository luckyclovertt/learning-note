# 索引
>复合索引可以根据第一个参数查询，不能根据后面的参数进行查询。实现索引的措施有B树，二叉树和hash等方法，索引可以大大提高搜索查询效率。

>设置索引会增加数据库的储存空间，在修改和删除数据的时候会花费更多的时间（因为索引也会随之改变）。
## 什么时候不适合用索引
1. 数据库稀疏度较小时；
2. 对于查找较少数据；
3. 定义为text、image、bit数据类型的列
4. 经常更新修改的列
## 索引的分类
### 1.唯一索引

唯一索引是不允许其中任何两行具有相同索引值的索引。
当现有数据中存在重复的键值时，大多数数据库不允许将新创建的唯一索引与表一起保存。数据库还可能防止添加将在表中创建重复键值的新数据。例如，如果在employee表中职员的姓(lname)上创建了唯一索引，则任何两个员工都不能同姓。

### 2.主键索引

数据库表经常有一列或列组合，其值唯一标识表中的每一行。该列称为表的主键。
在数据库关系图中为表定义主键将自动创建主键索引，主键索引是唯一索引的特定类型。该索引要求主键中的每个值都唯一。当在查询中使用主键索引时，它还允许对数据的快速访问。

### 3.聚集索引

在聚集索引中，表中行的物理顺序与键值的逻辑（索引）顺序相同。一个表只能包含一个聚集索引。
如果某索引不是聚集索引，则表中行的物理顺序与键值的逻辑顺序不匹配。与非聚集索引相比，聚集索引通常提供更快的数据访问速度。
聚集索引对于任意给定的表而言是唯一的，一个表只能有一个聚集索引。不一定非要有聚集索引。聚集索引特殊的方面是：聚集索引的叶级是实际的数据-也就是说，数据重新排序，按照和聚集索引排序条件声明的相同物理顺序存储。这意味着，一旦到达索引的叶级，就到达了数据。而非聚集索引，到达了叶级只是找到了数据的引用。
## B树
>B树只在叶节点中存key和value，其他节点值存key值而不存数据。

### 1.有一个根节点，根节点只有一个记录和两个孩子或者根节点为空；
### 2.每个节点记录中的key和指针相互间隔，指针指向孩子节点；
### 3.d是表示树的宽度，除叶子节点之外，其它每个节点有[d/2,d-1]条记录，并且些记录中的key都是从左到右按大小排列的，有[d/2+1,d]个孩子；
### 4.在一个节点中，第n个子树中的所有key，小于这个节点中第n个key，大于第n-1个key;
### 5.所有的叶子节点必须在同一层次，也就是它们具有相同的深度；
### 6.由于B-Tree的特性，在B-Tree中按key检索数据的算法非常直观：首先从根节点进行二分查找，如果找到则返回对应节点的data，否则对相应区间的指针指向的节点递归进行查找，直到找到节点或找到null指针，前者查找成功，后者查找失败。
>一个度为d的B-Tree，设其索引N个key，则其树高h的上限为logd(N/2)logd⁡(N/2)，检索一个key，其查找节点个数的渐进复杂度为O(logd((N+1)/2)logd⁡((N+1)/2))。从这点可以看出，B-Tree是一个非常有效率的索引数据结构。
## B+树
>B+树是B树的变种。

### B+树和B树的不同点：

1. 每个节点的指针上限为2d而不是2d+1；

2. 内节点不存储data，只存储key；（因此会更省空间）

3. B+树中只有叶子节点会带有指向记录的指针（ROWID），而B树则所有节点都带有，在内部节点出现的索引项不会再出现在叶子节点中；（这样可以容纳更多的索引项,可以降低树的高度）

